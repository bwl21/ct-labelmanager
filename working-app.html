<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChurchTools Label Manager</title>
    <style>
        :root {
          --ct-primary: #007cba;
          --ct-primary-hover: #0056b3;
          --ct-secondary: #6c757d;
          --ct-success: #28a745;
          --ct-danger: #dc3545;
          --ct-light: #f8f9fa;
          --ct-dark: #343a40;
          --ct-border-radius: 0.25rem;
          --ct-box-shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        }

        body {
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .ct-app { min-height: 100vh; background-color: var(--ct-light); }
        .ct-btn { display: inline-flex; align-items: center; justify-content: center; padding: 0.5rem 1rem; font-size: 0.875rem; font-weight: 500; border-radius: var(--ct-border-radius); border: 1px solid transparent; cursor: pointer; text-decoration: none; transition: all 0.2s ease; }
        .ct-btn-primary { color: white; background-color: var(--ct-primary); border-color: var(--ct-primary); }
        .ct-btn-primary:hover { background-color: var(--ct-primary-hover); }
        .ct-btn-outline-primary { color: var(--ct-primary); border-color: var(--ct-primary); background-color: transparent; }
        .ct-btn-outline-primary:hover { color: white; background-color: var(--ct-primary); }
        .ct-btn-sm { padding: 0.25rem 0.75rem; font-size: 0.75rem; }
        .ct-btn-lg { padding: 0.75rem 1.5rem; font-size: 1rem; }
        .ct-btn-success { color: white; background-color: var(--ct-success); border-color: var(--ct-success); }
        .ct-btn-danger { color: white; background-color: var(--ct-danger); border-color: var(--ct-danger); }
        
        .ct-form-control { width: 100%; padding: 0.5rem 0.75rem; font-size: 0.875rem; border: 1px solid #ced4da; border-radius: var(--ct-border-radius); box-sizing: border-box; }
        .ct-form-control:focus { outline: none; border-color: var(--ct-primary); box-shadow: 0 0 0 2px rgba(0, 124, 186, 0.25); }
        .ct-form-label { display: block; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.25rem; color: var(--ct-dark); }
        .ct-form-select { width: 100%; padding: 0.5rem 0.75rem; font-size: 0.875rem; border: 1px solid #ced4da; border-radius: var(--ct-border-radius); }
        
        .ct-card { background-color: white; border-radius: var(--ct-border-radius); border: 1px solid #e9ecef; box-shadow: var(--ct-box-shadow-sm); }
        .ct-card-header { padding: 1rem; border-bottom: 1px solid #e9ecef; background-color: #f8f9fa; border-radius: var(--ct-border-radius) var(--ct-border-radius) 0 0; }
        .ct-card-body { padding: 1rem; }
        
        .ct-table { width: 100%; font-size: 0.875rem; border-collapse: collapse; }
        .ct-table th, .ct-table td { padding: 0.75rem; border-bottom: 1px solid #dee2e6; text-align: left; }
        .ct-table th { font-weight: 600; background-color: #f8f9fa; }
        .ct-table tbody tr:hover { background-color: #f8f9fa; }
        
        .ct-alert { padding: 0.75rem 1rem; border-radius: var(--ct-border-radius); border: 1px solid transparent; }
        .ct-alert-info { color: #0c5460; background-color: #d1ecf1; border-color: #bee5eb; }
        .ct-alert-danger { color: #721c24; background-color: #f8d7da; border-color: #f5c6cb; }
        .ct-alert-success { color: #155724; background-color: #d4edda; border-color: #c3e6cb; }
        
        .ct-text-primary { color: var(--ct-primary); }
        .max-w-md { max-width: 28rem; }
        .max-w-7xl { max-width: 80rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .w-full { width: 100%; }
        .min-h-screen { min-height: 100vh; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-6 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
        .h-16 { height: 4rem; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .space-x-4 > * + * { margin-left: 1rem; }
        .text-lg { font-size: 1.125rem; }
        .text-xl { font-size: 1.25rem; }
        .text-sm { font-size: 0.875rem; }
        .text-xs { font-size: 0.75rem; }
        .font-semibold { font-weight: 600; }
        .text-gray-600 { color: #6b7280; }
        .text-gray-500 { color: #9ca3af; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-4 { margin-top: 1rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .bg-white { background-color: white; }
        .shadow-sm { box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }
        .border-b { border-bottom-width: 1px; }
        .border-gray-200 { border-color: #e5e7eb; }
        
        .ct-color-blue { background-color: #007cba; }
        .ct-color-green { background-color: #28a745; }
        .ct-color-red { background-color: #dc3545; }
        .ct-color-yellow { background-color: #ffc107; }
        .ct-color-orange { background-color: #fd7e14; }
        .ct-color-purple { background-color: #6f42c1; }
        
        .color-dot { display: inline-block; width: 20px; height: 20px; border-radius: 50%; border: 1px solid #ddd; }
        
        .hidden { display: none; }
    </style>
</head>
<body>
    <div id="app" class="ct-app min-h-screen">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex justify-between items-center h-16">
                    <h1 class="text-xl font-semibold ct-text-primary">ChurchTools Label Manager</h1>
                    <div v-if="isAuthenticated" class="flex items-center space-x-4">
                        <span class="text-sm text-gray-600">{{ currentUser }}</span>
                        <button @click="logout" class="ct-btn ct-btn-outline-primary ct-btn-sm">Logout</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto py-6 px-4">
            <!-- Login Form -->
            <div v-if="!isAuthenticated" class="max-w-md mx-auto">
                <div class="ct-card">
                    <div class="ct-card-header">
                        <h2 class="text-lg font-semibold">Login to ChurchTools</h2>
                        <p class="text-sm text-gray-600 mt-1">Enter your credentials to manage labels</p>
                    </div>
                    <div class="ct-card-body space-y-4">
                        <div>
                            <label class="ct-form-label">ChurchTools URL</label>
                            <input v-model="loginForm.baseUrl" type="url" class="ct-form-control" placeholder="https://your-church.church.tools">
                        </div>
                        <div>
                            <label class="ct-form-label">Username</label>
                            <input v-model="loginForm.username" type="text" class="ct-form-control" placeholder="Your username">
                        </div>
                        <div>
                            <label class="ct-form-label">Password</label>
                            <input v-model="loginForm.password" type="password" class="ct-form-control" placeholder="Your password">
                        </div>
                        <div v-if="loginError" class="ct-alert ct-alert-danger">{{ loginError }}</div>
                        <div v-if="loginStatus" class="ct-alert ct-alert-info">{{ loginStatus }}</div>
                        <button @click="login" :disabled="isLoading" class="ct-btn ct-btn-primary w-full ct-btn-lg">
                            {{ isLoading ? 'Logging in...' : 'Login to ChurchTools' }}
                        </button>
                    </div>
                </div>
            </div>

            <!-- Label Manager -->
            <div v-else>
                <!-- Controls -->
                <div class="flex justify-between items-center mb-4">
                    <div class="flex items-center space-x-4">
                        <h2 class="text-xl font-semibold">Label Manager</h2>
                        <select v-model="selectedType" class="ct-form-select" style="width: auto;">
                            <option value="persons">Person Tags</option>
                            <option value="songs">Song Tags</option>
                        </select>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button @click="refreshTags" class="ct-btn ct-btn-outline-primary ct-btn-sm">Refresh</button>
                        <button @click="showCreateForm = true" class="ct-btn ct-btn-primary ct-btn-sm">Create Tag</button>
                    </div>
                </div>

                <!-- Create/Edit Form -->
                <div v-if="showCreateForm || editingTag" class="ct-card mb-4">
                    <div class="ct-card-header">
                        <h3 class="font-semibold">{{ editingTag ? 'Edit Tag' : 'Create New Tag' }}</h3>
                    </div>
                    <div class="ct-card-body space-y-4">
                        <div>
                            <label class="ct-form-label">Tag Name</label>
                            <input v-model="tagForm.name" type="text" class="ct-form-control" placeholder="Enter tag name">
                        </div>
                        <div>
                            <label class="ct-form-label">Color</label>
                            <select v-model="tagForm.color" class="ct-form-select">
                                <option value="">Select a color</option>
                                <option value="blue">Blue</option>
                                <option value="green">Green</option>
                                <option value="red">Red</option>
                                <option value="yellow">Yellow</option>
                                <option value="orange">Orange</option>
                                <option value="purple">Purple</option>
                            </select>
                        </div>
                        <div class="flex space-x-2">
                            <button @click="saveTag" class="ct-btn ct-btn-primary">{{ editingTag ? 'Update' : 'Create' }}</button>
                            <button @click="cancelEdit" class="ct-btn ct-btn-secondary">Cancel</button>
                        </div>
                    </div>
                </div>

                <!-- Tags Table -->
                <div class="ct-card">
                    <div class="ct-card-header">
                        <h3 class="font-semibold">{{ selectedType === 'persons' ? 'Person Tags' : 'Song Tags' }} ({{ tags.length }})</h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="ct-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Color</th>
                                    <th>Type</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="tag in tags" :key="tag.id">
                                    <td class="font-semibold">{{ tag.name }}</td>
                                    <td>
                                        <span :class="`color-dot ct-color-${tag.color}`" :title="tag.color"></span>
                                    </td>
                                    <td>{{ tag.type }}</td>
                                    <td>
                                        <button @click="editTag(tag)" class="ct-btn ct-btn-outline-primary ct-btn-sm mr-2">Edit</button>
                                        <button @click="deleteTag(tag)" class="ct-btn ct-btn-danger ct-btn-sm">Delete</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div v-if="tags.length === 0" class="ct-card-body text-center text-gray-500">
                            No tags found. Create your first tag to get started.
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script>
        const { createApp, ref, reactive, computed, onMounted } = Vue;

        createApp({
            setup() {
                const isAuthenticated = ref(false);
                const currentUser = ref('');
                const isLoading = ref(false);
                const loginError = ref('');
                const loginStatus = ref('');
                const selectedType = ref('persons');
                const showCreateForm = ref(false);
                const editingTag = ref(null);
                
                const loginForm = reactive({
                    baseUrl: 'https://testbernhard.church.tools',
                    username: '',
                    password: ''
                });
                
                const tagForm = reactive({
                    name: '',
                    color: ''
                });
                
                const tags = ref([
                    { id: 1, name: 'Leadership', color: 'blue', type: 'persons' },
                    { id: 2, name: 'Worship Team', color: 'green', type: 'persons' },
                    { id: 3, name: 'Youth', color: 'orange', type: 'persons' },
                    { id: 4, name: 'Praise Songs', color: 'yellow', type: 'songs' },
                    { id: 5, name: 'Christmas', color: 'red', type: 'songs' }
                ]);
                
                const filteredTags = computed(() => {
                    return tags.value.filter(tag => tag.type === selectedType.value);
                });
                
                const login = async () => {
                    if (!loginForm.username || !loginForm.password) {
                        loginError.value = 'Please enter username and password';
                        return;
                    }
                    
                    isLoading.value = true;
                    loginError.value = '';
                    loginStatus.value = 'Connecting to ChurchTools...';
                    
                    // Simulate API call
                    setTimeout(() => {
                        loginStatus.value = 'Authenticating...';
                        setTimeout(() => {
                            isAuthenticated.value = true;
                            currentUser.value = loginForm.username;
                            isLoading.value = false;
                            loginStatus.value = '';
                        }, 1000);
                    }, 1000);
                };
                
                const logout = () => {
                    isAuthenticated.value = false;
                    currentUser.value = '';
                    loginForm.username = '';
                    loginForm.password = '';
                };
                
                const refreshTags = () => {
                    // Simulate refresh
                    console.log('Refreshing tags...');
                };
                
                const editTag = (tag) => {
                    editingTag.value = tag;
                    tagForm.name = tag.name;
                    tagForm.color = tag.color;
                    showCreateForm.value = false;
                };
                
                const saveTag = () => {
                    if (!tagForm.name || !tagForm.color) {
                        alert('Please fill in all fields');
                        return;
                    }
                    
                    if (editingTag.value) {
                        // Update existing tag
                        const index = tags.value.findIndex(t => t.id === editingTag.value.id);
                        if (index !== -1) {
                            tags.value[index] = {
                                ...tags.value[index],
                                name: tagForm.name,
                                color: tagForm.color
                            };
                        }
                    } else {
                        // Create new tag
                        const newTag = {
                            id: Date.now(),
                            name: tagForm.name,
                            color: tagForm.color,
                            type: selectedType.value
                        };
                        tags.value.push(newTag);
                    }
                    
                    cancelEdit();
                };
                
                const cancelEdit = () => {
                    showCreateForm.value = false;
                    editingTag.value = null;
                    tagForm.name = '';
                    tagForm.color = '';
                };
                
                const deleteTag = (tag) => {
                    if (confirm(`Are you sure you want to delete "${tag.name}"?`)) {
                        const index = tags.value.findIndex(t => t.id === tag.id);
                        if (index !== -1) {
                            tags.value.splice(index, 1);
                        }
                    }
                };
                
                return {
                    isAuthenticated,
                    currentUser,
                    isLoading,
                    loginError,
                    loginStatus,
                    selectedType,
                    showCreateForm,
                    editingTag,
                    loginForm,
                    tagForm,
                    tags: filteredTags,
                    login,
                    logout,
                    refreshTags,
                    editTag,
                    saveTag,
                    cancelEdit,
                    deleteTag
                };
            }
        }).mount('#app');
    </script>
</body>
</html>